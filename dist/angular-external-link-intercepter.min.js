!function(a){"use strict";var b=a.module("angular-external-link-interceptor.controller",[]);b.controller("ExternalLinkCtrl",["$scope","$location",function(a,b){a.externalUrl=b.$$search.next,a.cancel=function(){b.$$search.prev?b.url(b.$$search.prev):b.url("/")}}])}(window.angular),function(a){"use strict";var b=a.module("angular-external-link-interceptor.anchor",[]);b.directive("a",["ExternalLinkService",function(a){return{restrict:"E",link:function(b,c,d){var e;d.allowExternal||d.$observe("href",function(b){var d=a.bindModal(c,b,e);e=d})}}}])}(window.angular),function(a){"use strict";a.module("externalLinkInterceptor",["angular-external-link-interceptor.controller","angular-external-link-interceptor.anchor","angular-external-link-interceptor.external-link-config","angular-external-link-interceptor.external-link-service","angular-external-link-intercepter.templates"])}(window.angular),function(a){"use strict";var b=a.module("angular-external-link-interceptor.external-link-config",[]);b.provider("externalLinkConfig",function(){var a=!1;return{$get:function(){return{closeModalOnSuccess:a}},setCloseModalOnSuccess:function(b){a=b}}})}(window.angular),function(a){"use strict";var b=a.module("angular-external-link-interceptor.external-link-service",["ngRoute","ui.bootstrap.modal"]);b.service("ExternalLinkService",["$filter","$location","$uibModal",function(b,c,d){var e={externalLinkRE:new RegExp(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/),isExternal:function(a){var b=a.match(e.externalLinkRE);if("string"==typeof b[1]&&b[1].length>0){if("mailto:"===b[1]||"tel:"===b[1])return!1;if(b[1].toLowerCase()!==location.protocol)return!0}return"string"==typeof b[2]&&b[2].length>0&&b[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host},externalModal:function(b,c){b.preventDefault();var e=b.currentTarget;d.open({templateUrl:"templates/external_link/message.html",resolve:{externalUrl:function(){return c}},controller:["$scope","$uibModalInstance","externalUrl","externalLinkConfig",function(b,c,d,f){b.externalUrl=d,b.cancel=function(){c.dismiss("cancel")},b.closeOnSuccess=function(){f.closeModalOnSuccess&&c.dismiss("close")};var g=a.element(e);b.target=g.attr("target")}]})},bindModal:function(a,d,f){a.off("click",f);var g=function(a){e.externalModal(a,d)};return d&&e.isExternal(d)&&(a.attr("href",b("reverseUrl")("ExternalLinkCtrl")+"?next="+encodeURI(d)+"&prev="+encodeURI(c.path())),a.on("click",g)),g}};return e}])}(window.angular),function(a){"use strict";var b=a.module("angular-external-link-interceptor.routes",["ngRoute"]);b.config(["$routeProvider",function(a){a.when("/external-link/",{templateUrl:"templates/external_link/page.html",controller:"ExternalLinkCtrl"})}])}(window.angular),angular.module("angular-external-link-intercepter.templates",[]).run(["$templateCache",function(a){"use strict";a.put("templates/external_link/message.html",'<p>You are now leaving this website.</p><div><a ng-click=closeOnSuccess() ng-href="{{ externalUrl }}" target="{{ target }}" allow-external=true>Continue</a> <span ng-click=cancel()>Cancel</span></div>'),a.put("templates/external_link/page.html","<div ng-include src=\"'templates/external_link/page.html'\"></div>")}]);